/**
 * Apple-Style Flip Counter
 * Version 0.5.3 - May 7, 2011
 *
 * Copyright (c) 2010 Chris Nanney
 * http://cnanney.com/journal/code/apple-style-counter-revisited/
 *
 * Licensed under MIT
 * http://www.opensource.org/licenses/mit-license.php
 */var flipCounter=function(e,t){function y(){h=o.value;o.value+=o.inc;p=o.value;w(h,p);o.auto===!0&&(d=setTimeout(y,o.pace))}function b(e,t,n){var r=o.value,i=typeof t=="undefined"?!1:t,s=typeof n=="undefined"?1:n;i===!0&&s--;if(r!=e){h=o.value,o.auto=!0;r+o.inc<=e&&s!=0?r+=o.inc:r=e;o.value=r;p=o.value;w(h,p);d=setTimeout(function(){b(e,i,s)},o.pace)}else o.auto=!1}function w(e,t){a=S(e);f=S(t);var n,r=a.length,i=f.length;if(i>r){n=i-r;while(n>0){x(i-n+1,f[i-n]);n--}}if(i<r){n=r-i;while(n>0){T(r-n);n--}}for(var s=0;s<r;s++)f[s]!=a[s]&&E(s,a[s],f[s])}function E(e,t,n){function c(){if(u<7){a=u<3?"t":"b";f=r.getElementById(i+"_"+a+"_d"+e);f&&(f.style.backgroundPosition=l[u]);u++;u!=3?setTimeout(c,s):c()}}var s,u=0,a,f,l=["-"+o.fW+"px -"+t*o.tFH+"px",o.fW*-2+"px -"+t*o.tFH+"px","0 -"+n*o.tFH+"px","-"+o.fW+"px -"+(t*o.bFH+o.bOffset)+"px",o.fW*-2+"px -"+(n*o.bFH+o.bOffset)+"px",o.fW*-3+"px -"+(n*o.bFH+o.bOffset)+"px","0 -"+(n*o.bFH+o.bOffset)+"px"];if(o.auto===!0&&o.pace<=300)switch(e){case 0:s=o.pace/6;break;case 1:s=o.pace/5;break;case 2:s=o.pace/4;break;case 3:s=o.pace/3;break;default:s=o.pace/1.5}else s=80;s=s>80?80:s;c()}function S(e){return e.toString().split("").reverse()}function x(e,t){var n=Number(e)-1;v=r.createElement("ul");v.className="cd";v.id=i+"_d"+n;v.innerHTML='<li class="t" id="'+i+"_t_d"+n+'"></li><li class="b" id="'+i+"_b_d"+n+'"></li>';if(n%3==0){m=r.createElement("ul");m.className="cd";m.innerHTML='<li class="s"></li>';s.insertBefore(m,s.firstChild)}s.insertBefore(v,s.firstChild);r.getElementById(i+"_t_d"+n).style.backgroundPosition="0 -"+t*o.tFH+"px";r.getElementById(i+"_b_d"+n).style.backgroundPosition="0 -"+(t*o.bFH+o.bOffset)+"px"}function T(e){var t=r.getElementById(i+"_d"+e);s.removeChild(t);var n=s.firstChild.firstChild;if((" "+n.className+" ").indexOf(" s ")>-1){t=n.parentNode;s.removeChild(t)}}function N(e){var t=e.toString(),n=t.length,u=1,a;for(a=0;a<n;a++){v=r.createElement("ul");v.className="cd";v.id=i+"_d"+a;v.innerHTML=v.innerHTML='<li class="t" id="'+i+"_t_d"+a+'"></li><li class="b" id="'+i+"_b_d"+a+'"></li>';s.insertBefore(v,s.firstChild);if(u!=n&&u%3==0){m=r.createElement("ul");m.className="cd";m.innerHTML='<li class="s"></li>';s.insertBefore(m,s.firstChild)}u++}var f=S(t);for(a=0;a<n;a++){r.getElementById(i+"_t_d"+a).style.backgroundPosition="0 -"+f[a]*o.tFH+"px";r.getElementById(i+"_b_d"+a).style.backgroundPosition="0 -"+(f[a]*o.bFH+o.bOffset)+"px"}o.auto===!0&&(d=setTimeout(y,o.pace))}function C(e,t,n,r,i){var s={result:!0},o;s.cond1=e/t>=1?!0:!1;s.cond2=t*n<=e?!0:!1;s.cond3=Math.abs(t*n-e)<=10?!0:!1;s.cond4=Math.abs(t*r-i)<=100?!0:!1;s.cond5=t*r<=i?!0:!1;if(s.cond1&&s.cond2&&s.cond4&&s.cond5){o=Math.abs(e-t*n)+Math.abs(t*r-i);g.q===null&&(g.q=o);if(o<=g.q){g.pace=r;g.inc=n}}for(var u=1;u<=5;u++)s["cond"+u]===!1&&(s.result=!1);return s}function k(e){return!isNaN(parseFloat(e))&&isFinite(e)}function L(){clearTimeout(d);d=null}var n={value:0,inc:1,pace:1e3,auto:!0,tFH:39,bFH:64,fW:53,bOffset:390},r=window.document,i=typeof e!="undefined"&&e!==""?e:"flip-counter",s=r.getElementById(i),o={};for(var u in n)o[u]=u in t?t[u]:n[u];var a=[],f=[],l,c,h,p,d=null,v,m,g={q:null,pace:0,inc:0};this.setValue=function(e){if(k(e)){h=o.value;p=e;o.value=e;w(h,p)}return this};this.setIncrement=function(e){o.inc=k(e)?e:n.inc;return this};this.setPace=function(e){o.pace=k(e)?e:n.pace;return this};this.setAuto=function(e){if(e&&!o.auto){o.auto=!0;y()}if(!e&&o.auto){d&&L();o.auto=!1}return this};this.step=function(){o.auto||y();return this};this.add=function(e){if(k(e)){h=o.value;o.value+=e;p=o.value;w(h,p)}return this};this.subtract=function(e){if(k(e)){h=o.value;o.value-=e;if(o.value>=0)p=o.value;else{p="0";o.value=0}w(h,p)}return this};this.incrementTo=function(e,t,n){d&&L();if(typeof t!="undefined"){var r=k(t)?t*1e3:1e4,i=typeof n!="undefined"&&k(n)?n:o.pace,s=typeof e!="undefined"&&k(e)?e-o.value:0,u,a,f,l=0;g.q=null;i=r/s>i?Math.round(r/s/10)*10:i;u=Math.floor(r/i);a=Math.floor(s/u);f=C(s,u,a,i,r);if(s>0){while(f.result===!1&&l<100){i+=10;u=Math.floor(r/i);a=Math.floor(s/u);f=C(s,u,a,i,r);l++}if(l==100){o.inc=g.inc;o.pace=g.pace}else{o.inc=a;o.pace=i}b(e,!0,u)}}else b(e)};this.getValue=function(){return o.value};this.stop=function(){d&&L();return this};N(o.value)};